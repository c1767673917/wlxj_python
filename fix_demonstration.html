<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>价格显示修复演示</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container py-4">
        <h1 class="mb-4">供应商门户价格显示修复演示</h1>
        
        <div class="row">
            <div class="col-md-6">
                <h3>修复前问题</h3>
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="text-danger">问题列表</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-times text-danger me-2"></i>
                                报价信息几秒后消失
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-times text-danger me-2"></i>
                                显示冗余的百分比和差额信息
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-times text-danger me-2"></i>
                                列表和详情页格式不统一
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <h3>修复后效果</h3>
                <div class="card mb-3">
                    <div class="card-header">
                        <h5 class="text-success">修复内容</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                修复JavaScript导致的信息消失问题
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                简化价格显示，去除百分比和差额
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-check text-success me-2"></i>
                                统一列表和详情页面显示格式
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <h3>价格显示格式演示</h3>
        
        <div class="row">
            <div class="col-md-12">
                <div class="card">
                    <div class="card-header">
                        <h5>供应商报价列表 - 修复后效果</h5>
                    </div>
                    <div class="card-body">
                        <table class="table table-hover">
                            <thead class="table-light">
                                <tr>
                                    <th>订单号</th>
                                    <th>报价金额</th>
                                    <th>状态</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="table-success">
                                    <td>
                                        <strong>ORD202509121245040000001</strong>
                                    </td>
                                    <td>
                                        <strong class="text-success fs-5">¥300.00</strong>
                                        <small class="d-block text-success">成交价</small>
                                    </td>
                                    <td>
                                        <span class="badge bg-success">
                                            <i class="fas fa-trophy me-1"></i>已中标
                                        </span>
                                    </td>
                                </tr>
                                <tr class="table-success">
                                    <td>
                                        <strong>ORD202509121452000000002</strong>
                                    </td>
                                    <td>
                                        <div class="position-relative">
                                            <span class="text-muted text-decoration-line-through me-2" style="opacity: 0.6;">
                                                ¥2,000.00
                                            </span>
                                            <strong class="text-success fs-5">¥1,800.00</strong>
                                            <small class="d-block text-success">最终成交价</small>
                                        </div>
                                    </td>
                                    <td>
                                        <span class="badge bg-success">
                                            <i class="fas fa-trophy me-1"></i>已中标
                                        </span>
                                        <div class="mt-1">
                                            <small class="text-success d-block">
                                                <i class="fas fa-handshake me-1"></i>价格已协商
                                            </small>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-md-12">
                <div class="alert alert-success">
                    <h5 class="alert-heading">
                        <i class="fas fa-check-circle me-2"></i>修复完成
                    </h5>
                    <p class="mb-2">所有价格显示问题已修复:</p>
                    <ul class="mb-0">
                        <li><strong>价格不再消失</strong>: 修复了JavaScript自动隐藏逻辑</li>
                        <li><strong>显示格式简化</strong>: 只显示划线原价和最终成交价</li>
                        <li><strong>格式统一</strong>: 列表页面和详情页面保持一致</li>
                    </ul>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-md-12">
                <h4>技术修复详情</h4>
                <div class="card">
                    <div class="card-body">
                        <h5>根因分析</h5>
                        <p>报价信息消失的根本原因是JavaScript代码中的自动隐藏逻辑影响了页面内容中的alert元素。</p>
                        
                        <h5>修复方案</h5>
                        <ol>
                            <li>修改JavaScript选择器，只针对系统消息区域的alert元素</li>
                            <li>简化模板中的价格显示逻辑，去除百分比和差额计算</li>
                            <li>统一列表页面和详情页面的价格显示格式</li>
                        </ol>
                        
                        <h5>修改的文件</h5>
                        <ul>
                            <li><code>/templates/portal/quotes.html</code> - 简化列表页价格显示</li>
                            <li><code>/templates/portal/order_detail.html</code> - 简化详情页价格显示</li>
                            <li><code>/templates/portal/base.html</code> - 修复JavaScript自动隐藏逻辑</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>